<!DOCTYPE html>
<html>
<head>
  <title>Gojo Domain Expansion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      font-family: Arial, sans-serif;
      text-align: center;
      color: white;
    }

    h1 {
      position: absolute;
      top: 10px;
      width: 100%;
      z-index: 3;
      text-shadow: 0 0 20px purple;
    }

    video, canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
    }

    canvas {
      z-index: 2;
    }

    .energy {
      position: absolute;
      width: 250px;
      height: 250px;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: explode 1s ease-out forwards;
      z-index: 4;
    }

    @keyframes explode {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(6); opacity: 0; }
    }
  </style>
</head>

<body>

<h1>GOJO DOMAIN ACTIVATED</h1>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

async function setupCamera() {
  const stream = await navigator.mediaDevices.getUserMedia({ video: true });
  video.srcObject = stream;
  return new Promise(resolve => {
    video.onloadedmetadata = () => {
      resolve(video);
    };
  });
}

function createEnergy(color) {
  const energy = document.createElement("div");
  energy.className = "energy";
  energy.style.background = color;
  energy.style.boxShadow = `0 0 200px ${color}`;
  document.body.appendChild(energy);
  setTimeout(() => energy.remove(), 1000);
}

let lastTrigger = 0;

const hands = new Hands({
  locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
});

hands.setOptions({
  maxNumHands: 1,
  modelComplexity: 1,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7
});

hands.onResults(results => {

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  if (results.multiHandLandmarks.length > 0) {

    const landmarks = results.multiHandLandmarks[0];

    drawConnectors(ctx, landmarks, HAND_CONNECTIONS,
      { color: "#00FF00", lineWidth: 4 });
    drawLandmarks(ctx, landmarks,
      { color: "#FF0000", lineWidth: 2 });

    const now = Date.now();
    if (now - lastTrigger < 1500) return;

    const indexUp = landmarks[8].y < landmarks[6].y;
    const middleUp = landmarks[12].y < landmarks[10].y;
    const ringUp = landmarks[16].y < landmarks[14].y;
    const pinkyUp = landmarks[20].y < landmarks[18].y;

    // ðŸ”µ Blue (Index only)
    if (indexUp && !middleUp && !ringUp && !pinkyUp) {
      createEnergy("blue");
      lastTrigger = now;
    }

    // ðŸ”´ Red (Index + Middle)
    else if (indexUp && middleUp && !ringUp && !pinkyUp) {
      createEnergy("red");
      lastTrigger = now;
    }

    // ðŸŸ£ Purple (Open palm)
    else if (indexUp && middleUp && ringUp && pinkyUp) {
      createEnergy("purple");
      lastTrigger = now;
    }
  }
});

async function main() {
  await setupCamera();

  const camera = new Camera(video, {
    onFrame: async () => {
      await hands.send({ image: video });
    }
  });

  camera.start();
}

main();
</script>

</body>
</html>
